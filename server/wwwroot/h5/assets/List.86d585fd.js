import{x as U,n as p,g as q,y as G,E as R,z as J,B as K,S as O,A as Q,P as W,h as c,k as e,i as o,u as v,D as i,c as k,G as f,v as M,H as D,w as r,o as a,l as w}from"./vendor.eba449fb.js";/* empty css              */import{a as X}from"./index.3bdf07ec.js";/* empty css               */import{m as B}from"./index.fb0492d1.js";import"./http.a6f869e0.js";import{g as Z}from"./index.c5a787b1.js";import{d as $}from"./dayjs.min.5f938ecc.js";import"./_commonjsHelpers.0592d25c.js";const tt={class:"page-header"},et={class:"page-header-action"},st={key:0},at={key:1},ot={class:"page-header-action"},nt={class:"text-center"},ct={key:0,class:"date-p"},it=["onClick"],lt={class:"team-avatar-item"},dt={class:"text-black pt-1"},rt={class:"flex-1"},_t={class:"score-wrap"},ut={class:"score-span"},mt=e("span",null,"-",-1),ht={class:"score-span"},pt={key:0},vt=w("\u8FDB\u884C\u4E2D"),ft={key:1},yt=w("\u5DF2\u5B8C\u6210"),gt={class:"text-grey"},kt={class:"team-avatar-item"},Mt={class:"text-black pt-1"},wt={class:"game-list-wrap"},xt=e("div",{class:"game-list-header"},"\u9009\u62E9\u8D5B\u4E8B",-1),bt={class:"game-list-content"},jt=["onClick"],Ct={class:"fs-sm"},Yt=w(" \u521B\u5EFA\u8D5B\u4E8B "),Et={setup(At){const _=U(),x=p(!1),z=[{name:"\u521B\u5EFA\u65B0\u6BD4\u8D5B"},{name:"\u6DFB\u52A0\u6BD4\u8D5B\u7ED3\u679C"},{name:"\u521B\u5EFA\u961F\u5185\u8D5B"}];function b(t){let n=l.activeMatch;_.push(`/game/add?matchId=${n._id}&matchName=${n.name}`)}const u=p(!1);function H(){u.value=!0,y()}const j=p([]),l=q({activeMatch:null});async function y(){await B.getMatches().then(t=>{j.value=t,t.length===0?u.value=!0:l.activeMatch=t[0]})}const m=p([]);(async()=>{if(await y(),l.activeMatch){let t=await Z.getByMatchId(l.activeMatch._id);m.value=t}})();function T(){_.push("/match/add")}async function V(t){await B.removeMatch(t._id),y(),alert("\u5220\u9664\u6210\u529F")}function N(t){return t?(t=$(t),new Date().getFullYear()===t.year()?t.format("MM\u6708DD\u65E5 HH:mm"):t.format("YYYY-MM-DD HH:mm")):""}function g(t){return $(t).format("YYYY-MM")}function S(t){let n=g(t.dateTime),d=m.value.filter(h=>g(h.dateTime)===n);if(!(!t||!d.length))return d[0]._id===t._id}function L(t){console.log(t.status),t.status==1?_.push(`/game/result?id=${t._id}`):_.push(`/game/action?id=${t._id}`)}return(t,n)=>{const d=G,h=R,C=X,Y=J,E=K,F=O,I=Q,P=W;return a(),c(M,null,[e("div",tt,[e("div",et,[o(d,{name:"bar-chart-o",size:"22"})]),e("div",{onClick:H},[v(l).activeMatch?(a(),c("span",st,i(v(l).activeMatch.name),1)):(a(),c("span",at,"\u8BF7\u6DFB\u52A0\u8D5B\u4E8B")),o(d,{name:"arrow-down",class:"ml-2"})]),e("div",ot,[v(l).activeMatch?(a(),k(d,{key:0,name:"plus",size:"22",onClick:b})):f("",!0)])]),v(l).activeMatch?f("",!0):(a(),k(h,{key:0,description:"\u6682\u65E0\u8D5B\u4E8B\u8BB0\u5F55"})),m.value.length?f("",!0):(a(),k(h,{key:1,description:"\u6682\u65E0\u6BD4\u8D5B\u8BB0\u5F55"})),e("div",nt,[(a(!0),c(M,null,D(m.value,s=>(a(),c("div",{key:s._id},[S(s)?(a(),c("p",ct,i(g(s.dateTime)),1)):f("",!0),o(F,{class:"game-cell"},{right:r(()=>[o(E,{class:"delete-button",square:"",type:"danger",text:"\u5220\u9664"})]),default:r(()=>[e("div",{class:"d-flex ai-center game-list-item",onClick:A=>L(s)},[e("div",lt,[o(C,{size:"58",round:"",logo:s.teama.team.logo,class:"team-logo"},null,8,["logo"]),e("div",dt,i(s.teama.team.name),1)]),e("div",rt,[e("p",null,i(N(s.dateTime)),1),e("div",_t,[e("span",ut,i(s.teama.score||0),1),mt,e("span",ht,i(s.teamb.score||0),1)]),s.status?(a(),c("div",ft,[o(Y,{type:"success",round:""},{default:r(()=>[yt]),_:1})])):(a(),c("div",pt,[o(Y,{type:"success",round:""},{default:r(()=>[vt]),_:1})])),e("div",gt,i(s.place),1)]),e("div",kt,[o(C,{size:"58",round:"",logo:s.teamb.team.logo,class:"team-logo"},null,8,["logo"]),e("div",Mt,i(s.teamb.team.name),1)])],8,it)]),_:2},1024)]))),128))]),o(I,{show:x.value,"onUpdate:show":n[0]||(n[0]=s=>x.value=s),actions:z,"cancel-text":"\u53D6\u6D88","close-on-click-action":"",onSelect:b},null,8,["show"]),o(P,{show:u.value,"onUpdate:show":n[1]||(n[1]=s=>u.value=s),round:"",style:{height:"50%"}},{default:r(()=>[e("div",wt,[xt,e("div",bt,[(a(!0),c(M,null,D(j.value,(s,A)=>(a(),c("div",{key:A,class:"game-list-data"},[e("p",null,i(s.name),1),e("button",{onClick:Dt=>V(s)},"\u5220\u9664",8,jt),e("p",Ct,i(s.teams.length)+"\u652F\u7403\u961F",1)]))),128))]),e("div",{class:"game-list-footer",onClick:T},[o(d,{name:"plus",size:"22"}),Yt])])]),_:1},8,["show"])],64)}}};export{Et as default};
