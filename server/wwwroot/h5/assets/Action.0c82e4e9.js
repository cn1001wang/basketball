import{o as d,h as r,k as s,D as c,p as k,j as E,r as I,i as o,l as _,G as f,O as q,v as b,H as x,an as J,w as m,B as D,ao as G,m as N,y as z,ap as K,P as Q,c as A}from"./vendor.eba449fb.js";import{h as O}from"./http.1b1d5323.js";import{g as T}from"./index.99d686af.js";import{g as p,a as L}from"./gameEventType.f52d3598.js";import{_ as w,a as W,r as X}from"./index.0213a75d.js";const R={async getEventsByGameId(t){return await O.get(`/rest/gameEvents/getEventsByGameId?gameId=${t}`)},async getById(t){return await O.get(`/rest/gameEvents/getById/${t}`)},async add(t){return await O.post("/rest/gameEvents",t)},async remove(t){return await O.delete(`/rest/gameEvents/${t}`)}};const Y={props:{team:Object,events:Array,game:Object},data(){return{}},computed:{score(){return this.getScore(this.team._id)},foul(){return this.getFoul(this.team._id).length}},methods:{getFoul(t){return this.events.filter(i=>i.teamId===t).filter(i=>[p.\u72AF\u89C4,p.\u6280\u672F\u72AF\u89C4,p.\u8FDD\u4F53\u72AF\u89C4].includes(i.type)&&i.quarter===this.game.section)},getPause(t){return this.events.filter(i=>i.teamId===t).filter(i=>i.type===p.\u6682\u505C&&i.quarter===this.game.section).length},getScore(t){let e=this.events.filter(i=>i.teamId===t);return e.filter(i=>i.type===p.\u7F5A\u7403).length+e.filter(i=>i.type===p.\u4E24\u5206).length*2+e.filter(i=>i.type===p.\u4E09\u5206).length*3}}},U=t=>(k("data-v-46e9088a"),t=t(),E(),t),Z={class:"team-title-item"},$={class:"team-name"},ee={class:"score-title"},te={class:"count-wrap d-flex"},se={class:"flex-1"},ie=U(()=>s("p",{class:"count-title"},"\u72AF\u89C4",-1)),ae={class:"count-tag"},ne={class:"flex-1"},le=U(()=>s("p",{class:"count-title"},"\u6682\u505C",-1)),oe={class:"count-tag"};function ce(t,e,i,u,a,n){return d(),r("div",Z,[s("div",$,c(i.team.name),1),s("div",ee,c(n.score),1),s("div",te,[s("div",se,[ie,s("div",ae,c(n.foul),1)]),s("div",ne,[le,s("div",oe,c(n.getPause(i.team._id)),1)])])])}var de=w(Y,[["render",ce],["__scopeId","data-v-46e9088a"]]);const re={props:{rest:Boolean,pause:Boolean,game:Object,curTime:Array,events:Array},components:{ActionHeaderTeam:de},data(){return{}},computed:{}},me=t=>(k("data-v-446edf54"),t=t(),E(),t),ue={class:"action-header"},_e={class:"time-item"},he={class:"d-flex jc-center ai-center"},ve={key:0,class:"rest-time-p"},pe={key:1,class:"rest-time-p"},ge={class:"cutdown-item"},ye={class:"cutdown-item"},fe=me(()=>s("span",null,":",-1)),be={class:"cutdown-item"},Te={class:"cutdown-item"};function we(t,e,i,u,a,n){const h=I("action-header-team");return d(),r("div",ue,[o(h,{events:i.events,team:i.game.teama.id,game:i.game},null,8,["events","team","game"]),s("div",_e,[s("div",he,[_(" \u7B2C"+c(i.rest?i.game.section-1:i.game.section)+"\u8282 ",1),i.pause?(d(),r("p",ve,"\u53EB\u6682\u505C\u4E2D")):f("",!0),i.rest?(d(),r("p",pe,"\u4F11\u606F\u4E2D")):f("",!0)]),s("p",{class:q(["time-p",i.rest||i.pause&&"rest-time-p"])},[s("span",ge,c(i.curTime[0][0]),1),s("span",ye,c(i.curTime[0][1]),1),fe,s("span",be,c(i.curTime[1][0]),1),s("span",Te,c(i.curTime[1][1]),1)],2)]),o(h,{events:i.events,team:i.game.teamb.id,game:i.game},null,8,["events","team","game"])])}var Ce=w(re,[["render",we],["__scopeId","data-v-446edf54"]]);const ke={props:{team:Object,rule:Object,events:Array},data(){return{}},computed:{players(){return this.team.activePlayers.filter(t=>this.team.lineup.includes(t._id)).concat(this.team.activePlayers.filter(t=>!this.team.lineup.includes(t._id)))},foulList(){let t=this.events.filter(i=>[p.\u72AF\u89C4,p.\u6280\u672F\u72AF\u89C4,p.\u8FDD\u4F53\u72AF\u89C4].includes(i.type)),e={};return this.team.activePlayers.forEach(i=>{e[i._id]=t.filter(u=>u.player._id===i._id).length}),e}},methods:{getScore(t){let e=this.events.filter(i=>{var u;return((u=i.player)==null?void 0:u._id)===t});return e.filter(i=>i.type===p.\u7F5A\u7403).length+e.filter(i=>i.type===p.\u4E24\u5206).length*2+e.filter(i=>i.type===p.\u4E09\u5206).length*3}}},Ee={class:"flex-1 team-list"},Ie=["onClick"],xe={class:"player-num"},Pe={class:"player-name"},Ve={class:"foul-dot-cell"};function Ae(t,e,i,u,a,n){return d(),r("div",Ee,[(d(!0),r(b,null,x(n.players,h=>(d(),r("div",{class:q(["player-item",i.team.lineup.includes(h._id)&&"player-lineup-item"]),key:h._id,onClick:y=>t.$emit("action",h)},[s("div",xe,c(h.number),1),s("div",Pe,c(h.name),1),s("div",Ve,[(d(!0),r(b,null,x(i.rule.personalFoulLimit+1,y=>(d(),r("div",{class:q(["foul-dot",n.foulList[h._id]>=y&&"foul-full-dot"]),key:y},null,2))),128))]),s("span",null,c(n.getScore(h._id)),1)],10,Ie))),128))])}var Se=w(ke,[["render",Ae],["__scopeId","data-v-5c21fb66"]]);const Oe={props:{events:Array,game:Object},data(){let t={};return Object.keys(p).forEach(e=>{t[p[e]]=e}),{gameEventTypeMap:t}},computed:{teamIdMap(){let t={};return t[this.game.teama.id._id]=this.game.teama.id.name,t[this.game.teamb.id._id]=this.game.teamb.id.name,t},playerIdMap(){this.game.teama.activePlayers},comEvents(){return[...this.events].reverse()}},methods:{}},Re=t=>(k("data-v-617e1757"),t=t(),E(),t),je={class:"event-list-wrap"},Be={class:"d-flex event-list-item"},qe={key:0},De=Re(()=>s("div",{class:"flex-1"},null,-1));function Ge(t,e,i,u,a,n){return d(),r("div",je,[(d(!0),r(b,null,x(n.comEvents,h=>(d(),r("div",{key:h._id},[s("div",null,"\u7B2C"+c(h.quarter)+"\u8282",1),s("div",Be,[s("span",null,c(h.time),1),s("span",null," \u3010"+c(n.teamIdMap[h.teamId])+"\u3011",1),h.player?(d(),r("span",qe,c(h.player.number)+"\u53F7 "+c(h.player.name),1)):f("",!0),De,s("span",null,c(a.gameEventTypeMap[h.type]),1)])]))),128))])}var Ne=w(Oe,[["render",Ge],["__scopeId","data-v-617e1757"]]);const Le={props:{team:Object,game:Object,countdown:Number},data(){return{downPlayers:[],upPlayers:[]}},computed:{lineup(){return this.team.activePlayers.filter(t=>this.team.lineup.includes(t._id))},substitute(){return this.team.activePlayers.filter(t=>!this.team.lineup.includes(t._id))}},methods:{handleUpClick(t){let e=t._id,i=this.upPlayers;i.includes(e)?i.splice(i.indexOf(e),1):i.push(e)},handleDownClick(t){let e=t._id,i=this.downPlayers;i.includes(e)?i.splice(i.indexOf(e),1):i.push(e)},async handleConfirm(){if(this.team.lineup.length+this.upPlayers.length-this.downPlayers.length>5){J("\u8D85\u8FC7\u573A\u4E0A\u4EBA\u6570\u9650\u5236");return}let t=[...this.team.lineup];this.downPlayers.forEach(a=>{t.splice(t.indexOf(a),1)}),t=t.concat(this.upPlayers);let e=this.team.id._id===this.game.teama.id._id,i={},u=this.team;i[e?"teama":"teamb"]={lineup:t,id:u.id._id,color:u.color,activePlayers:u.activePlayers.map(a=>a._id),score:u.score,foulCount:u.foulCount,suspendCout:u.suspendCout},this.insertGameTime(),await T.update(this.game._id,i),this.$emit("reload")},async insertGameTime(){var t=[];this.downPlayers.forEach(e=>{t.push({upOrDown:0,player:e,quarter:this.game.section,time:this.countdown,matchId:this.game.match._id,gameId:this.game._id,teamId:this.team.id._id})}),this.upPlayers.forEach(e=>{t.push({upOrDown:1,player:e,quarter:this.game.section,time:this.countdown,matchId:this.game.match._id,gameId:this.game._id,teamId:this.team.id._id})}),L.add(t)}}},j=t=>(k("data-v-3f6da0f6"),t=t(),E(),t),Ue={class:"pb-4 pt-2"},Me=_("\u786E\u5B9A"),Fe=j(()=>s("div",{class:"msg-label",vlo:""},"\u573A\u4E0A\u7403\u5458",-1)),He={class:"player-list"},Je=["onClick"],ze={class:"player-number-item"},Ke=j(()=>s("div",{class:"flex-1"},null,-1)),Qe={key:0,class:"down-span"},We=j(()=>s("div",{class:"msg-label mt-4"},"\u66FF\u8865\u7403\u5458",-1)),Xe={class:"player-list"},Ye=["onClick"],Ze={class:"player-number-item"},$e=j(()=>s("div",{class:"flex-1"},null,-1)),et={key:0,class:"up-span"},tt={key:0};function st(t,e,i,u,a,n){const h=D;return d(),r("div",null,[s("div",Ue,[o(h,{block:"",type:"primary",onClick:n.handleConfirm},{default:m(()=>[Me]),_:1},8,["onClick"])]),Fe,s("div",He,[(d(!0),r(b,null,x(n.lineup,y=>(d(),r("div",{class:"player-item",onClick:v=>n.handleDownClick(y)},[s("span",ze,c(y.number),1),s("span",null,c(y.name),1),Ke,a.downPlayers.includes(y._id)?(d(),r("span",Qe,"\u6362\u4E0B\u2193")):f("",!0)],8,Je))),256))]),We,s("div",Xe,[(d(!0),r(b,null,x(n.substitute,y=>(d(),r("div",{class:"player-item",onClick:v=>n.handleUpClick(y)},[s("span",Ze,c(y.number),1),s("span",null,c(y.name),1),$e,a.upPlayers.includes(y._id)?(d(),r("span",et,"\u6362\u4E0A\u2191")):f("",!0)],8,Ye))),256)),n.substitute.length===0?(d(),r("p",tt,"\u6682\u65E0\u66FF\u8865\u9009\u624B")):f("",!0)])])}var it=w(Le,[["render",st],["__scopeId","data-v-3f6da0f6"]]);const at={props:{game:Object},data(){return{countdown:3,timer:null}},mounted(){this.setTime()},beforeDestroy(){this.timer&&clearTimeout(this.timer)},methods:{setTime(){setTimeout(()=>{if(this.countdown--,this.countdown===0){this.$emit("start"),clearTimeout(this.timer);return}this.setTime()},1e3)}}},P=t=>(k("data-v-814cdc64"),t=t(),E(),t),nt=P(()=>s("div",{class:"overlay-bg"},null,-1)),lt={class:"overlay-wrap"},ot={class:"match-div"},ct=P(()=>s("div",null,"\u6240\u5C5E\u8D5B\u4E8B",-1)),dt={class:"rule-div"},rt=P(()=>s("div",null,"\u6BD4\u8D5B\u89C4\u5219",-1)),mt={class:"d-flex team-div"},ut={class:"team-avatar-item"},_t={class:"pt-1"},ht=P(()=>s("div",{class:"vs-div"},"VS",-1)),vt={class:"team-avatar-item"},pt={class:"pt-1"},gt=P(()=>s("div",{class:"flex-1"},null,-1)),yt=P(()=>s("div",{style:{height:"10vh"}},null,-1));function ft(t,e,i,u,a,n){const h=W;return d(),r(b,null,[nt,s("div",lt,[s("div",ot,[ct,s("p",null,c(i.game.match.name),1)]),s("div",dt,[rt,s("p",null,c(i.game.rule.name),1)]),s("div",mt,[s("div",ut,[o(h,{size:"78",round:"",logo:i.game.teama.id.logo,class:"team-logo"},null,8,["logo"]),s("div",_t,c(i.game.teama.id.name),1)]),ht,s("div",vt,[o(h,{size:"78",round:"",logo:i.game.teamb.id.logo,class:"team-logo"},null,8,["logo"]),s("div",pt,c(i.game.teamb.id.name),1)])]),gt,s("div",{class:"start-btn",onClick:e[0]||(e[0]=y=>t.$emit("start"))},"\u5F00\u59CB\u8BA1\u65F6("+c(a.countdown)+")",1),yt])],64)}var bt=w(at,[["render",ft],["__scopeId","data-v-814cdc64"]]);let S={data:function(t,e,i){if(t=t||"localData",i=i||localStorage,!(!window.JSON||!window.JSON.parse)){if(e===null)return delete i[t];e=typeof e=="object"?e:{key:e};var u;try{u=JSON.parse(i[t])}catch{u={}}return"value"in e&&(u[e.key]=e.value),e.remove&&delete u[e.key],i[t]=JSON.stringify(u),e.key?u[e.key]:u}}};const Tt={components:{ActionHeader:Ce,PlayerList:Se,EventList:Ne,ReplacePlayer:it,OverlayCover:bt},props:{id:String},data(){return{gameEventType:p,game:null,events:[],countdownActive:!1,countdown:0,restCountdown:null,pauseCountdown:null,pauseTimer:null,restTimer:null,timer:null,actionEventVisible:!1,activePlayer:null,activeTeam:null,moreActionVisible:!1,assistVisible:!1,eventVisible:!1,activeReplaceTeam:null,replaceVisible:!1,startOverlayVisible:!0}},computed:{assistPlayers(){return this.activeTeam?this.activeTeam.activePlayers.filter(t=>this.activeTeam.lineup.includes(t._id)&&t._id!=this.activePlayer._id):[]},timeOfEach(){return this.game.rule.timeOfEach*60},quarterNumber(){return this.game.rule.quarterNumber},quarterRestTime(){return this.game.rule.quarterRestTime},halftimeRestTime(){return this.game.rule.halftimeRestTime},curTime(){let t=this.pauseCountdown?this.pauseCountdown:this.restCountdown?this.restCountdown:this.timeOfEach-this.countdown;t=t>0?t:0;let e=Math.floor(t/60);e=e>=10?e:"0"+e;let i=t%60;return i=i>=10?i:"0"+i,[e.toString(),i.toString()]}},async created(){let t=await T.getById(this.id);this.game=t,this.loadEvents();let e=S.data("gameTime")[this.game._id];e&&(this.countdown=e)},beforeDestroy(){this.resetTimer()},methods:{getTeamScore(t){let e=this.events.filter(i=>i.teamId===t);return e.filter(i=>i.type===p.\u7F5A\u7403).length+e.filter(i=>i.type===p.\u4E24\u5206).length*2+e.filter(i=>i.type===p.\u4E09\u5206).length*3},resetTimer(){this.timer&&clearTimeout(this.timer),this.restTimer&&clearTimeout(this.restTimer),this.pauseTimer&&clearTimeout(this.pauseTimer)},openEventVisible(){this.eventVisible=!0,this.moreActionVisible=!1},async loadEvents(){this.events=await R.getEventsByGameId(this.game._id)},handleActionEvent(t,e){this.actionEventVisible=!0,this.activePlayer=t,this.activeTeam=e},handleCloseGame(){this.moreActionVisible=!1,G({title:"\u7ACB\u5373\u7ED3\u675F\u6BD4\u8D5B\uFF1F",message:"\u7ED3\u675F\u540E\u81EA\u52A8\u4FDD\u5B58\u6240\u6709\u6570\u636E\u5230\u670D\u52A1\u5668",confirmButtonText:"\u786E\u5B9A"}).then(()=>{this.closeGame()}).catch(()=>{})},async closeGame(){this.resetTimer(),await T.endGame(this.game._id),X.replace(`/game/result?id=${this.game._id}`)},handleCloseSection(){this.moreActionVisible=!1,G({title:"\u7ED3\u675F\u672C\u8282\u6BD4\u8D5B\uFF1F",message:"\u70B9\u51FB\u786E\u5B9A\u8FDB\u5165\u8282\u95F4\u4F11\u606F",confirmButtonText:"\u786E\u5B9A"}).then(()=>{this.goInRest()}).catch(()=>{})},goInRest(){this.countdown=0,S.data("gameTime",{key:this.game._id,value:this.countdown}),T.update(this.game._id,{countdown:this.countdown}),this.countdownActive=!1,this.resetTimer(),this.restCountdown=(this.game.section===this.quarterNumber/2?this.halftimeRestTime:this.quarterRestTime)*60,this.startRestTime(),this.game.section++,T.update(this.game._id,{section:this.game.section})},endRest(){this.restCountdown=null,clearTimeout(this.restTimer),this.startTime()},startRestTime(){this.restTimer=setTimeout(()=>{if(this.restCountdown--,this.restCountdown===0){this.endRest();return}let t={key:this.game._id,value:this.restCountdown};S.data("gameRestTime",t),this.startRestTime()},1e3)},firstStartGame(){this.startTime(),this.startOverlayVisible=!1;let t=[];this.game.teama.lineup.forEach(e=>{t.push({upOrDown:1,player:e,quarter:this.game.section,time:this.countdown,matchId:this.game.match._id,gameId:this.game._id,teamId:this.game.teama.id._id})}),this.game.teamb.lineup.forEach(e=>{t.push({upOrDown:1,player:e,quarter:this.game.section,time:this.countdown,matchId:this.game.match._id,gameId:this.game._id,teamId:this.game.teamb.id._id})}),L.add(t)},startTime(){this.countdownActive=!0,this.timer=setTimeout(()=>{if(this.countdown++,this.countdown>this.timeOfEach){if(this.game.section===this.quarterNumber){let e=this.getTeamScore(this.game.teama.id._id),i=this.getTeamScore(this.game.teamb.id._id),u=e>i?this.game.teama.id.name+"\u83B7\u80DC":e<i?this.game.teamb.id.name+"\u83B7\u80DC":"\u5E73\u5C40";N({title:"\u6BD4\u8D5B\u7ED3\u675F",message:u,confirmButtonText:"\u786E\u5B9A"}).then(()=>{this.closeGame()});return}N({title:"\u672C\u8282\u5DF2\u7ECF\u7ED3\u675F",message:"\u70B9\u51FB\u786E\u5B9A\u8FDB\u5165\u8282\u95F4\u4F11\u606F",confirmButtonText:"\u786E\u5B9A"}).then(()=>{this.goInRest()});return}let t={key:this.game._id,value:this.countdown};S.data("gameTime",t),T.update(this.game._id,{countdown:this.countdown}),this.startTime()},1e3)},pauseTime(){this.countdownActive=!this.countdownActive,clearTimeout(this.timer),this.timer=null},replacement(t){this.moreActionVisible=!1,this.activeReplaceTeam=t,this.replaceVisible=!0},async handleReplaceReload(){this.replaceVisible=!1;let t=await T.getById(this.id),e=this.activeReplaceTeam.id._id===this.game.teama.id._id;this.activeReplaceTeam.lineup=t[e?"teama":"teamb"].lineup},async teamPause(t){await R.add({type:p.\u6682\u505C,quarter:this.game.section,time:this.curTime.join(":"),matchId:this.game.match._id,gameId:this.game._id,teamId:t._id}),this.loadEvents(),this.moreActionVisible=!1,this.pauseTime(),this.bolPauseGame=!0,this.pauseCountdown=this.game.rule.pauseDuration,this.startPauseTime()},startPauseTime(){this.pauseTimer=setTimeout(()=>{if(this.pauseCountdown--,this.pauseCountdown===0){this.endRest();return}let t={key:this.game._id,value:this.pauseCountdown};S.data("gamePauseTime",t),this.startPauseTime()},1e3)},endPause(){this.pauseCountdown=null,clearTimeout(this.pauseTimer),this.startTime()},getScore(t){this.actionEventVisible=!1,this.assistVisible=!0,this.activeEventType=t},noAssistClick(){this.assistVisible=!1,this.actionEventClick(this.activeEventType),this.activeEventType=null},async assistEvent(t){this.assistVisible=!1,await R.add({type:p.\u52A9\u653B,player:t._id,quarter:this.game.section,time:this.curTime.join(":"),matchId:this.game.match._id,gameId:this.game._id,teamId:this.activePlayer.teamId}),this.actionEventClick(this.activeEventType),this.activeEventType=null},async actionEventClick(t){this.actionEventVisible=!1,await R.add({type:t,player:this.activePlayer._id,quarter:this.game.section,time:this.curTime.join(":"),matchId:this.game.match._id,gameId:this.game._id,teamId:this.activePlayer.teamId}),this.loadEvents(),this.activePlayer=null,this.activeTeam=null}}},g=t=>(k("data-v-5970c0f4"),t=t(),E(),t),wt={key:0,class:"game-board"},Ct={class:"h1-title"},kt={class:"action-body d-flex"},Et=g(()=>s("div",{class:"split-line"},null,-1)),It={class:"bottom-btns-wrap"},xt=_("\u7ED3\u675F\u6682\u505C"),Pt=_("\u7ED3\u675F\u4F11\u606F"),Vt={key:0,class:"action-dialog"},At={class:"px-4 py-3"},St={class:"action-dialog-body"},Ot={class:"action-event-item"},Rt=g(()=>s("div",{class:"action-label"},"\u7F5A\u7403",-1)),jt=_("+1"),Bt=_("\u672A\u8FDB"),qt={class:"action-event-item"},Dt=g(()=>s("div",{class:"action-label"},"\u6295\u7BEE",-1)),Gt=_("+2"),Nt=_("\u672A\u8FDB"),Lt={class:"action-event-item"},Ut=g(()=>s("div",{class:"action-label"},"\u4E09\u5206",-1)),Mt=_("+3"),Ft=_("\u672A\u8FDB"),Ht={class:"action-event-item"},Jt=g(()=>s("div",{class:"action-label"},"\u72AF\u89C4",-1)),zt=_("\u666E\u901A"),Kt=_("\u6280\u672F"),Qt=_("\u8FDD\u4F53"),Wt={class:"action-event-item"},Xt=g(()=>s("div",{class:"action-label"},"\u5931\u8BEF",-1)),Yt=_("+1"),Zt={class:"action-event-item"},$t=g(()=>s("div",{class:"action-label"},"\u7BEE\u677F",-1)),es=_("\u524D\u573A"),ts=_("\u540E\u573A"),ss={class:"action-event-item"},is=g(()=>s("div",{class:"action-label"},"\u52A9\u653B",-1)),as=_("+1"),ns={class:"action-event-item"},ls=g(()=>s("div",{class:"action-label"},"\u62A2\u65AD",-1)),os=_("+1"),cs={class:"action-event-item"},ds=g(()=>s("div",{class:"action-label"},"\u76D6\u5E3D",-1)),rs=_("+1"),ms={class:"action-dialog"},us=g(()=>s("div",{class:"px-4 py-3"},"\u66F4\u591A\u64CD\u4F5C",-1)),_s={class:"action-dialog-body"},hs={class:"action-event-item"},vs=g(()=>s("div",{class:"action-label"},"\u6682\u505C",-1)),ps={class:"action-event-item"},gs=g(()=>s("div",{class:"action-label"},"\u6362\u4EBA",-1)),ys={class:"action-event-item"},fs=g(()=>s("div",{class:"action-label"},"\u4E8B\u4EF6",-1)),bs=_(" \u67E5\u770B "),Ts={key:0,class:"action-event-item"},ws=g(()=>s("div",{class:"action-label"},"\u7ED3\u675F\u672C\u8282",-1)),Cs=_(" \u7ED3\u675F\u672C\u8282 "),ks={class:"action-event-item"},Es=g(()=>s("div",{class:"action-label"},"\u7ED3\u675F\u6BD4\u8D5B",-1)),Is=_(" \u7ED3\u675F\u6BD4\u8D5B "),xs={key:0,class:"action-dialog"},Ps={class:"px-4 py-3 d-flex ai-center"},Vs=_(" \u9009\u62E9\u52A9\u653B\u7403\u5458 "),As=g(()=>s("div",{class:"flex-1"},null,-1)),Ss={class:"action-dialog-body px-4 pb-5"},Os=["onClick"],Rs={class:"player-number-item"},js={class:"action-dialog"},Bs={class:"px-4 py-3 d-flex ai-center"},qs=g(()=>s("span",null,"\u6BD4\u8D5B\u4E8B\u4EF6\u5217\u8868",-1)),Ds=g(()=>s("div",{class:"flex-1"},null,-1)),Gs={class:"action-dialog-body px-4 pb-5"},Ns={key:0,class:"action-dialog"},Ls={class:"px-4 py-3 d-flex ai-center"},Us=g(()=>s("div",{class:"flex-1"},null,-1)),Ms={class:"action-dialog-body px-4 pb-5"},Fs={key:1,class:"van-overlay"};function Hs(t,e,i,u,a,n){const h=I("action-header"),y=I("player-list"),v=D,C=z,B=K,V=Q,M=I("event-list"),F=I("replace-player"),H=I("overlay-cover");return d(),r(b,null,[a.game?(d(),r("div",wt,[s("h1",Ct,c(a.game.match.name),1),o(h,{game:a.game,curTime:n.curTime,events:a.events,rest:!!a.restCountdown,pause:!!a.pauseCountdown},null,8,["game","curTime","events","rest","pause"]),s("div",kt,[o(y,{team:a.game.teama,rule:a.game.rule,events:a.events.filter(l=>l.teamId==a.game.teama.id._id),onAction:e[0]||(e[0]=l=>n.handleActionEvent(l,a.game.teama))},null,8,["team","rule","events"]),Et,o(y,{team:a.game.teamb,rule:a.game.rule,events:a.events.filter(l=>l.teamId==a.game.teamb.id._id),onAction:e[1]||(e[1]=l=>n.handleActionEvent(l,a.game.teamb))},null,8,["team","rule","events"])]),s("div",It,[a.pauseCountdown?(d(),A(v,{key:0,onClick:n.endPause},{default:m(()=>[xt]),_:1},8,["onClick"])):a.restCountdown?(d(),A(v,{key:1,onClick:n.endRest},{default:m(()=>[Pt]),_:1},8,["onClick"])):(d(),r(b,{key:2},[a.countdownActive?(d(),A(C,{key:1,name:"pause-circle",onClick:n.pauseTime},null,8,["onClick"])):(d(),A(C,{key:0,name:"play-circle",onClick:n.startTime},null,8,["onClick"]))],64)),o(C,{name:"add",onClick:e[2]||(e[2]=l=>a.moreActionVisible=!0)})]),o(V,{show:a.actionEventVisible,"onUpdate:show":e[18]||(e[18]=l=>a.actionEventVisible=l),round:""},{default:m(()=>[a.activePlayer?(d(),r("div",Vt,[s("div",At,c(a.activeTeam.id.name)+" "+c(a.activePlayer.number)+" \u53F7\u961F\u5458\uFF1A "+c(a.activePlayer.name),1),s("div",St,[s("div",Ot,[Rt,o(v,{type:"primary",class:"action-btn",plain:"",onClick:e[3]||(e[3]=l=>n.actionEventClick(a.gameEventType.\u7F5A\u7403))},{default:m(()=>[jt]),_:1}),o(v,{class:"action-btn",plain:"",onClick:e[4]||(e[4]=l=>n.actionEventClick(a.gameEventType.\u7F5A\u7403\u672A\u8FDB))},{default:m(()=>[Bt]),_:1})]),s("div",qt,[Dt,o(v,{type:"primary",class:"action-btn",plain:"",onClick:e[5]||(e[5]=l=>n.getScore(a.gameEventType.\u4E24\u5206))},{default:m(()=>[Gt]),_:1}),o(v,{class:"action-btn",plain:"",onClick:e[6]||(e[6]=l=>n.actionEventClick(a.gameEventType.\u4E24\u5206\u672A\u8FDB))},{default:m(()=>[Nt]),_:1})]),s("div",Lt,[Ut,o(v,{type:"primary",class:"action-btn",plain:"",onClick:e[7]||(e[7]=l=>n.getScore(a.gameEventType.\u4E09\u5206))},{default:m(()=>[Mt]),_:1}),o(v,{class:"action-btn",plain:"",onClick:e[8]||(e[8]=l=>n.actionEventClick(a.gameEventType.\u4E09\u5206\u672A\u8FDB))},{default:m(()=>[Ft]),_:1})]),o(B),s("div",Ht,[Jt,o(v,{type:"danger",class:"action-btn",plain:"",onClick:e[9]||(e[9]=l=>n.actionEventClick(a.gameEventType.\u72AF\u89C4))},{default:m(()=>[zt]),_:1}),o(v,{type:"danger",class:"action-btn",plain:"",onClick:e[10]||(e[10]=l=>n.actionEventClick(a.gameEventType.\u6280\u672F\u72AF\u89C4))},{default:m(()=>[Kt]),_:1}),o(v,{type:"danger",class:"action-btn",plain:"",onClick:e[11]||(e[11]=l=>n.actionEventClick(a.gameEventType.\u8FDD\u4F53\u72AF\u89C4))},{default:m(()=>[Qt]),_:1})]),s("div",Wt,[Xt,o(v,{type:"danger",class:"action-btn",plain:"",onClick:e[12]||(e[12]=l=>n.actionEventClick(a.gameEventType.\u5931\u8BEF))},{default:m(()=>[Yt]),_:1})]),o(B),s("div",Zt,[$t,o(v,{type:"primary",class:"action-btn",plain:"",onClick:e[13]||(e[13]=l=>n.actionEventClick(a.gameEventType.\u524D\u573A\u7BEE\u677F))},{default:m(()=>[es]),_:1}),o(v,{type:"primary",class:"action-btn",plain:"",onClick:e[14]||(e[14]=l=>n.actionEventClick(a.gameEventType.\u540E\u573A\u7BEE\u677F))},{default:m(()=>[ts]),_:1})]),s("div",ss,[is,o(v,{type:"primary",class:"action-btn",plain:"",onClick:e[15]||(e[15]=l=>n.actionEventClick(a.gameEventType.\u52A9\u653B))},{default:m(()=>[as]),_:1})]),s("div",ns,[ls,o(v,{type:"primary",class:"action-btn",plain:"",onClick:e[16]||(e[16]=l=>n.actionEventClick(a.gameEventType.\u62A2\u65AD))},{default:m(()=>[os]),_:1})]),s("div",cs,[ds,o(v,{type:"primary",class:"action-btn",plain:"",onClick:e[17]||(e[17]=l=>n.actionEventClick(a.gameEventType.\u76D6\u5E3D))},{default:m(()=>[rs]),_:1})])])])):f("",!0)]),_:1},8,["show"]),o(V,{show:a.moreActionVisible,"onUpdate:show":e[23]||(e[23]=l=>a.moreActionVisible=l),round:""},{default:m(()=>[s("div",ms,[us,s("div",_s,[s("div",hs,[vs,o(v,{type:"primary",class:"action-btn",plain:"",onClick:e[19]||(e[19]=l=>n.teamPause(a.game.teama.id))},{default:m(()=>[_(c(a.game.teama.id.name)+"\u6682\u505C ",1)]),_:1}),o(v,{type:"primary",class:"action-btn",plain:"",onClick:e[20]||(e[20]=l=>n.teamPause(a.game.teamb.id))},{default:m(()=>[_(c(a.game.teamb.id.name)+"\u6682\u505C ",1)]),_:1})]),s("div",ps,[gs,o(v,{type:"primary",class:"action-btn",plain:"",onClick:e[21]||(e[21]=l=>n.replacement(a.game.teama))},{default:m(()=>[_(c(a.game.teama.id.name)+"\u6362\u4EBA ",1)]),_:1}),o(v,{type:"primary",class:"action-btn",plain:"",onClick:e[22]||(e[22]=l=>n.replacement(a.game.teamb))},{default:m(()=>[_(c(a.game.teamb.id.name)+"\u6362\u4EBA ",1)]),_:1})]),s("div",ys,[fs,o(v,{type:"primary",class:"action-btn",plain:"",onClick:n.openEventVisible},{default:m(()=>[bs]),_:1},8,["onClick"])]),o(B),a.game.section!==n.quarterNumber?(d(),r("div",Ts,[ws,o(v,{type:"danger",class:"action-btn",plain:"",onClick:n.handleCloseSection},{default:m(()=>[Cs]),_:1},8,["onClick"])])):f("",!0),s("div",ks,[Es,o(v,{type:"danger",class:"action-btn",plain:"",onClick:n.handleCloseGame},{default:m(()=>[Is]),_:1},8,["onClick"])])])])]),_:1},8,["show"]),o(V,{show:a.assistVisible,"onUpdate:show":e[25]||(e[25]=l=>a.assistVisible=l),round:""},{default:m(()=>[a.assistVisible?(d(),r("div",xs,[s("div",Ps,[Vs,As,o(C,{name:"close",onClick:n.noAssistClick},null,8,["onClick"])]),s("div",Ss,[s("div",null,[(d(!0),r(b,null,x(n.assistPlayers,l=>(d(),r("div",{key:l._id,onClick:Js=>n.assistEvent(l),class:"player-item"},[s("span",Rs,c(l.number),1),s("span",null,c(l.name),1)],8,Os))),128)),s("div",{onClick:e[24]||(e[24]=(...l)=>n.noAssistClick&&n.noAssistClick(...l)),class:"player-item text-grey-1"},"\u65E0\u52A9\u653B\u7403\u5458")])])])):f("",!0)]),_:1},8,["show"]),o(V,{show:a.eventVisible,"onUpdate:show":e[27]||(e[27]=l=>a.eventVisible=l)},{default:m(()=>[s("div",js,[s("div",Bs,[qs,Ds,o(C,{name:"close",onClick:e[26]||(e[26]=l=>a.eventVisible=!1)})]),s("div",Gs,[o(M,{events:a.events,game:a.game},null,8,["events","game"])])])]),_:1},8,["show"]),o(V,{show:a.replaceVisible,"onUpdate:show":e[29]||(e[29]=l=>a.replaceVisible=l),round:""},{default:m(()=>[a.replaceVisible?(d(),r("div",Ns,[s("div",Ls,[s("span",null,c(a.activeReplaceTeam.id.name)+"\u6362\u4EBA",1),Us,o(C,{name:"close",onClick:e[28]||(e[28]=l=>a.replaceVisible=!1)})]),s("div",Ms,[o(F,{team:a.activeReplaceTeam,game:a.game,countdown:a.countdown,onReload:n.handleReplaceReload},null,8,["team","game","countdown","onReload"])])])):f("",!0)]),_:1},8,["show"])])):f("",!0),a.startOverlayVisible?(d(),r("div",Fs,[a.game?(d(),A(H,{key:0,game:a.game,onStart:n.firstStartGame},null,8,["game","onStart"])):f("",!0)])):f("",!0)],64)}var Ys=w(Tt,[["render",Hs],["__scopeId","data-v-5970c0f4"]]);export{Ys as default};
