import{d as E,g as D,n as k,L as C,N as I,F as x,am as A,C as j,A as U,h as S,i as o,k as _,w as g,v as N,o as L,u as l}from"./vendor.eba449fb.js";/* empty css              *//* empty css              *//* empty css               */import{r as c}from"./index.9c83f1b4.js";import{h as r}from"./http.035739e7.js";import{t as p}from"./index.d6e5684e.js";import"./_commonjsHelpers.0592d25c.js";const d={async get(){return await r.get("/rest/players")},async getById(n){return await r.get(`/rest/players/getById/${n}`)},async save(n){return await r.post("/rest/players",n)},async remove(n){return await r.delete(`/rest/players/${n}`)},async update(n,s){return await r.put(`/rest/players/${n}`,s)}};const $={class:"main-bg pt-4"},K=E({props:{teamId:String,playerId:String},setup(n){const s=n;let e=D({teamId:s.teamId,name:"",logo:"",caption:!1,number:"",height:"",weight:"",position:"",age:"",remarks:""});const m=k(!1),F=[{name:"\u65E0",value:""},{name:"\u5F97\u5206\u540E\u536B",value:"SG"},{name:"\u63A7\u7403\u540E\u536B",value:"PG"},{name:"\u5C0F\u524D\u950B",value:"SF"},{name:"\u5927\u524D\u950B",value:"PF"},{name:"\u4E2D\u950B",value:"C"}],y=C(()=>{let t=F.find(a=>a.value===e.position);return t==null?void 0:t.name});function v(t){e.position=t.value}(async function(){if(s.playerId){var t=await d.getById(s.playerId);e.teamId=s.teamId,e.name=t.name,e.logo=t.logo,e.caption=t.caption,e.number=t.number,e.height=t.height,e.weight=t.weight,e.position=t.position,e.age=t.age,e.remarks=t.remarks}})();function B(){c.back()}async function f(){if(!e.name)return p.showToast({type:"fail",message:"\u8BF7\u8F93\u5165\u961F\u5458\u540D\u5B57"});if(!e.number)return p.showToast({type:"fail",message:"\u8BF7\u8F93\u5165\u961F\u5458\u540D\u53F7\u7801"});s.playerId?await d.update(s.playerId,e):await d.save(e),p.showToast({type:"success",message:"\u521B\u5EFA\u6210\u529F\uFF01"}),c.back()}return(t,a)=>{const b=I,i=x,V=A,w=j,h=U;return L(),S(N,null,[o(b,{title:s.playerId?"\u7F16\u8F91\u7403\u5458":"\u65B0\u589E\u7403\u5458","left-text":"\u8FD4\u56DE","right-text":"\u5B58\u50A8","left-arrow":"",onClickLeft:B,onClickRight:f},null,8,["title"]),_("div",$,[o(w,{inset:""},{default:g(()=>[o(i,{modelValue:l(e).name,"onUpdate:modelValue":a[0]||(a[0]=u=>l(e).name=u),name:"playerName",label:"\u540D\u5B57",placeholder:"\u8BF7\u8F93\u5165\u540D\u5B57"},null,8,["modelValue"]),o(i,{modelValue:l(e).number,"onUpdate:modelValue":a[1]||(a[1]=u=>l(e).number=u),name:"playerNumber",label:"\u53F7\u7801",placeholder:"\u8BF7\u8F93\u5165\u53F7\u7801",type:"number"},null,8,["modelValue"]),o(i,{modelValue:l(e).logo,"onUpdate:modelValue":a[2]||(a[2]=u=>l(e).logo=u),name:"playerLogo",label:"\u5934\u50CF",placeholder:"\u8BF7\u8F93\u5165\u5934\u50CF"},null,8,["modelValue"]),o(i,{modelValue:l(e).height,"onUpdate:modelValue":a[3]||(a[3]=u=>l(e).height=u),name:"height",label:"\u8EAB\u9AD8",placeholder:"\u8BF7\u8F93\u5165\u8EAB\u9AD8"},null,8,["modelValue"]),o(i,{modelValue:l(e).weight,"onUpdate:modelValue":a[4]||(a[4]=u=>l(e).weight=u),name:"weight",label:"\u4F53\u91CD",placeholder:"\u8BF7\u8F93\u5165\u4F53\u91CD"},null,8,["modelValue"]),o(i,{name:"caption",label:"\u662F\u5426\u961F\u957F"},{input:g(()=>[o(V,{modelValue:l(e).caption,"onUpdate:modelValue":a[5]||(a[5]=u=>l(e).caption=u)},null,8,["modelValue"])]),_:1}),o(i,{name:"position",label:"\u4E60\u60EF\u4F4D\u7F6E","model-value":l(y),"is-link":"",readonly:"",placeholder:"\u8BF7\u9009\u62E9\u4F4D\u7F6E",onClick:a[6]||(a[6]=u=>m.value=!0)},null,8,["model-value"]),o(i,{modelValue:l(e).age,"onUpdate:modelValue":a[7]||(a[7]=u=>l(e).age=u),name:"playerAge",label:"\u5E74\u9F84",placeholder:"\u8BF7\u8F93\u5165\u5E74\u9F84"},null,8,["modelValue"]),o(i,{modelValue:l(e).remarks,"onUpdate:modelValue":a[8]||(a[8]=u=>l(e).remarks=u),label:"\u5907\u6CE8",placeholder:"\u8BF7\u586B\u5199",type:"textarea",rows:"3",autosize:""},null,8,["modelValue"])]),_:1})]),o(h,{show:m.value,"onUpdate:show":a[9]||(a[9]=u=>m.value=u),actions:F,"cancel-text":"\u53D6\u6D88","close-on-click-action":"",onSelect:v},null,8,["show"])],64)}}});export{K as default};
